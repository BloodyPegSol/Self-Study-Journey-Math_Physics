\documentclass[12pt]{article}
\usepackage[margin=1in]{geometry}
\usepackage{amsmath, amsfonts,amsthm,amssymb,epigraph,etoolbox,mathtools,setspace,enumitem}  
\usepackage{tikz}
\usetikzlibrary{datavisualization} 
\usepackage[makeroom]{cancel} 
\usepackage[linguistics]{forest}
\usetikzlibrary{patterns}
\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\Mod}[1]{\ (\mathrm{mod}\ #1)}



\newlist{legal}{enumerate}{10}
\setlist[legal]{label*=\arabic*.}

\DeclarePairedDelimiter\bra{\langle}{\rvert}
\DeclarePairedDelimiter\ket{\lvert}{\rangle}
\DeclarePairedDelimiterX\braket[2]{\langle}{\rangle}{#1\delimsize\vert #2}


\newenvironment{theorem}[2][Theorem]{\begin{trivlist}
		\item[\hskip \labelsep {\bfseries #1}\hskip \labelsep {\bfseries #2.}]}{\end{trivlist}}
\newenvironment{lemma}[2][Lemma]{\begin{trivlist}
		\item[\hskip \labelsep {\bfseries #1}\hskip \labelsep {\bfseries #2.}]}{\end{trivlist}}
\newenvironment{result}[2][Result]{\begin{trivlist}
		\item[\hskip \labelsep {\bfseries #1}\hskip \labelsep {\bfseries #2.}]}{\end{trivlist}}
\newenvironment{exercise}[2][Exercise]{\begin{trivlist}
		\item[\hskip \labelsep {\bfseries #1}\hskip \labelsep {\bfseries #2.}]}{\end{trivlist}}
\newenvironment{problem}[2][Problem]{\begin{trivlist}
		\item[\hskip \labelsep {\bfseries #1}\hskip \labelsep {\bfseries #2.}]}{\end{trivlist}}
\newenvironment{question}[2][Question]{\begin{trivlist}
		\item[\hskip \labelsep {\bfseries #1}\hskip \labelsep {\bfseries #2.}]}{\end{trivlist}}
\newenvironment{corollary}[2][Corollary]{\begin{trivlist}
		\item[\hskip \labelsep {\bfseries #1}\hskip \labelsep {\bfseries #2.}]}{\end{trivlist}}
\newenvironment{solution}[2][Solution]{\begin{trivlist}
		\item[\hskip \labelsep {\bfseries #1}\hskip \labelsep {\bfseries #2.}]}{\end{trivlist}}

\setlength\epigraphwidth{8cm}
\setlength\epigraphrule{0pt}

\makeatletter
\patchcmd{\epigraph}{\@epitext{#1}}{\itshape\@epitext{#1}}{}{}
\makeatother


\begin{document} 
	
	\title{Section 8.3: Equivalence Relations}
	\author{Juan Patricio Carrizales Torres}
	\date{May 19, 2022}
	\maketitle
	
	In this section, the concept of \textbf{Equivalence Relation} on some set $A$ is introduced. In short words, an \textbf{Equivalence Relation} on some set $A$ is one that has is reflexive, symmetric and transitive. One of the best examples is the relation $R$ defined by $x\; R \; y$ if $x=y$. Also, an important subset to understand the behavior of these type of relations is the \textbf{equivalence class}. Basically, an \textbf{equivalence class} $[a]$ contains all elements $x\in A$ that are related to some specific $a\in A$, namely, 
	\begin{equation*}
		[a] = \{x\in A: x\; R \;a\}
	\end{equation*}
	Note that if $b\in [a]$ ($b$ is related to $a$), then $b$ and $a$ are "equivalent". Note that $a\in[b]$ and $[b]=[a]$ due to the symmetric and transitive properties of $R$. Quite interesting!!!  
	
	\begin{lemma}{8.3.1}
		Let $R$ be an equivalence relation on an nonempty set $A$. Then, $a\; R \; b$ for some $a,b\in A$ is a necessary and sufficiente condition for $[a]=[b]$.
		\begin{proof}
			Because $R$ is reflexive, $a\in [a]$ and $b\in [b]$ and so they are nonempty. Consider some $x\in [a]$, then $x\; R \; a$. Note that $a\; R \; b$ and so, by the transtitive property of $R$, $x\; R \; b$. Hence, $x\in [b]$ which implies that $[a]\subseteq [b]$.
			
			Now consider some $y\in [b]$ and so $y\; R\; b$. Since $R$ is symmetric and $a\; R \; b$, it follows that $b\; R \;a$. Thus, by the transitive property, $y\; R\; a$ and so $y\in [a]$. Therefore, $[b]\subseteq [a]$ and so $[a]=[b]$.\\
			
			For the converse, assume that $[a]=[b]$. Since $R$ is reflexive, it follows that $a\in [a]$ and so $a\in [b]$. Hence, $a\; R \; b$.
		\end{proof}
	\end{lemma}
		Note that this implies that the union of all equivalence classes of $A$ is $A$ itself!!!
		
	\begin{corollary}{8.3.1}
		Let $R$ be an equivalence relation on an nonempty set $A$ and consider some $a,b\in A$. Then, $[b] = [a]$ if and only if $b\in [a]$.
		\begin{proof}
			Assume that $[b]=[a]$. By \textbf{Lemma 8.3.1},  $b\; R\; a$. Therefore, $b\in [a]$.
			
			For the converse, suppose that $b \in [a]$. Then, $b\; R\; a$. By \textbf{Lemma 8.3.1}, $[b]=[a]$.
		\end{proof}
	\end{corollary}
	
	\begin{corollary}{8.3.2}
		Let $R$ be an equivalence relation on $A$ with a total of $n\in \N$ different equivalence classes $[a_{1}],[a_{2}],[a_{3}]\ldots, [a_{n}]$. Then, the equivalence classes are disjoint.
		\begin{proof}
			Suppose, to the contrary, that $[a_{i}]\cap [a_{j}]\neq \emptyset$ for some positive integers $i,j\leq n$ such that $i\neq j$. Then, there is at least some $x\in [a_{i}]\cap [a_{j}]$ and so $x\in [a_{i}]$ and $x\in [a_{j}]$. By \textbf{Corollary 8.3.1}, $[a_{i}] = [x] = [a_{j}]$. However, this contradicts the assumption that $[a_{i}] \neq [a_{j}]$.
		\end{proof}
	\end{corollary}

	\begin{lemma}{8.3.2}
		Let $R$ be an equivalence relation on $A$ with a total of $n\in \N$ different equivalence classes $[a_{1}],[a_{2}],[a_{3}]\ldots, [a_{n}]$. Then, 
		\begin{equation*}
			\bigcup_{i=1}^{n} [a_{i}] = A
		\end{equation*}
		\begin{proof}
			Suppose, to the contrary, that 
			\begin{align*}
				\bigcup_{i=1}^{n} [a_{i}] \neq A.
			\end{align*}
		Hence, either 
		\begin{equation*}
			\bigcup_{i=1}^{n} [a_{i}] \not\subseteq A \quad \text{or} \quad \bigcup_{i=1}^{n} [a_{i}] \not\supseteq A.
		\end{equation*}
	 Suppose the first. Then, there exists some $x\in \bigcup_{i=1}^{n} [a_{i}]$ such that $x\not\in A$. This implies that $x\in [a_{k}]$ for some positive integer $k$. However, $x\not\in A$ and this contradicts the fact that $[a_{k}] = \{x\in A: x\; R \;a_{k}\}$. \\
	 
	 Thus, we can assume that $\bigcup_{i=1}^{n} [a_{i}] \not\supseteq A$. Then, there is some $y\in A$ such that $y\not\in \bigcup_{i=1}^{n} [a_{i}]$. Because $\bigcup_{i=1}^{n} [a_{i}]$ is the union of all distinct equivalence classes resulting from $R$, it follows that $y \; \cancel R \; a$ for any $a\in A$. Hence $(y,y) \not\in R$. However, this contradicts the fact that $R$ is reflexive.\\
	 
	 Thus, 
	 \begin{equation*}
	 	\bigcup_{i=1}^{n} [a_{i}] = A.
	 \end{equation*} 
		\end{proof}
	\end{lemma}
	\begin{problem}{24}
		Let $R$ be an equivalence relation on $A=\{a,b,c,d,e,f,g\}$ such that $a\; R \; c$, $c\; R \; d$, $d\; R \; g$ and $b\; R \;f$. If there are three distinct equivalence classes resulting from $R$, then determine these equivalence classes and determine all elements of $R$.
		\begin{solution}{24}
			By repetitive use of \textbf{Lemma 8.3.1}, we conclude that $[a]=[c]=[d]=[g]$ and $[b]=[f]$. Also, since $e$ is not related to any element of $A$, it follows that the remaining equivalence class is $[e]$. Note that the reflexive property of $R$ implies that $g\; R \; g$ and $f\; R\; f$. Therefore, by the transitive property,
			\begin{align*}
				[g] &= \{a,g,d,c\} = [a] = [c]= [d]\\
				[f] &= \{b,f\} =[b]\\
				[e] &= \{e\} 
			\end{align*}
		Therefore, 
		\begin{align*}
			R = \{&(a,a),(g,a),(d,a),(c,a),(a,c),(g,c),(d,c),\\
			&(c,c),(a,d),(g,d),(d,d),(c,d),(a,g),(g,g),\\
			&(d,g),(c,g),(b,b),(f,b),(b,f),(f,f),(e,e)\}.
		\end{align*}
		
		This is a taste of how useful equivalence classes can be. Wow!!!
		\end{solution}
	\end{problem}
	
	\begin{problem}{25}
		Let $A = \{1,2,3,4,5,6\}$. The relation
		\begin{align*}
			R=\{(1,1),(1,5),(2,2),(2,3),(2,6),(3,2),(3,3),\\
			(3,6), (4,4),(5,1),(5,5),(6,2),(6,3),(6,6)\}
		\end{align*}
		is an equivalence relation on $A$. Determine the distinct equivalence classes.
		\begin{solution}{25}
			Since $R$ is an equivalence relation on $A$, then we can use \textbf{Lemma 1.8.3} to determine the equivalence classes. Note that $(1,1),(5,1),(2,2),(6,2),(3,2),(4,4)\in R$. Hence,
			\begin{align*}
				[1] &= \{1,5\} = [5]\\
				[2] &= \{2,6,3\} = [3] = [6]\\
				[4] &= \{4\} 
			\end{align*}
		\end{solution}
	\end{problem}

	\begin{problem}{26}
		Let $A=\{1,2,3,4,5,6\}$. The distinct equivalence classes resulting from an equivalence relation $R$ on $A$ are $\{1,4,5\}, \{2,6\}$ and $\{3\}$. What is $R$?
		\begin{solution}{26}
			By \textbf{Corollary 8.3.1},
			\begin{align*}
				 \{1,4,5\} &= [1] = [4] = [5]\\
				 \{2,6\} &= [2] = [6] \; \text{ and}\\
				 \{3\} &= [3].
			\end{align*}
			Therefore, the relation
			\begin{align*}
				R=\{(1,1),(4,1),(5,1),(1,4),(4,4),(5,4),(1,5),\\ (4,5),(5,5),(2,2),(6,2),(2,6),(6,6),(3,3)\}
			\end{align*}
		\end{solution}
	\end{problem}

	\begin{corollary}{8.3.3}
		Let $R$ be an equivalence relation on $A$ with a total of $n\in \N$ different equivalence classes $[a_{1}],[a_{2}],[a_{3}]\ldots, [a_{n}]$. Then, 
		\begin{equation*}
			|R| = \sum_{i=1}^{n} \left|[a_{i}]\right|^{2}.
		\end{equation*}
		\begin{proof}
			Consider some $[a_{k}]$ for a $k\leq n$. By \textbf{Corollary 8.3.1}, $[x] = [a_{k}]$ for every $x\in [a_{k}]$. Then, $|[a_{k}]|$ elements of $A$ are related to $x$ for every $x\in [a_{k}]$. Hence, $|[a_{k}]|^{2}$ different n-tuples are elements of $R$. This is the apport of each equivalence class, however we need to be sure that each $x\in A$ is an element of only one equivalence class. Since \textbf{Corollary 8.3.2} implies that the different equivalence classes are disjoint and \textbf{Lemma 8.3.2} implies that their union is $A$, it follows that
			\begin{equation*}
				|R| = \sum_{i=1}^{n} \left|[a_{i}]\right|^{2}
			\end{equation*}
		\end{proof}
	\end{corollary}

	\begin{problem}{27}
		Let $R$ be a relation defined on $\Z$ by $a \; R \; b$ if $a^{3} = b^{3}$. Show that $R$ is an equivalence relation on $\Z$ and determine the distinct equivalence classes.
		\begin{solution}{27}
		We first show that $R$ is an equivalence relation on $\Z$.
		\begin{proof}
			 Consider some integer $x$, then $x^{3} = x^{3}$ and so $x\; R \; x$. Hence, $R$ is reflexive.\\
			Now, consider some $x,y\in \Z$ such that $x \; R \; y$. Therefore, $x^{3} = y^{3}$ and so $y^{3} = x^{3}$, which implies that $y\; R \;x$. Thus, $R$ is symmetric.\\
			Let $x,y,z\in \Z$ such that $x\; R \; y$ and $y\; R \; z$. Then, $x^{3} = y^{3} = z^{3}$ and so $x^{3} = z^{3}$, which implies that $x\; R \;z$. Therefore, $R$ is transitive.
			Hence, $R$ is an equivalence relation on $\Z$.
		\end{proof} 
		Note that $x^{3} = y^{3} \iff x=y$ for any integers $x$ and $y$. Therefore, each integer is only related to itself by $R$ namely, $[x] =\{x\}$ whenever $x\in \Z$. Hence, there is an inifinity of different equivalence relations.  
		\end{solution}
	\end{problem}
    \begin{problem}{30}
    	Let $H=\{2^{m}:m\in \Z\}$. A relation $R$ is defined on the set $\Q^{+}$ of positive rational numbers by $a\; R \; b$ if $a/b\in H$.
    	\begin{enumerate}[label=(\alph*)]
    		\item Show that $R$ is an equivalence relation.
    		\begin{proof}
    			Firs, we prove that it is reflexive. Consider some $x\in \Q^{+}$. Then $x/x = 1 = 2^{0} \in H$. Hence, $x\; R \; x$.\\
    			Now, we show that it is symmetric. Let $a,b\in \Q^{+}$ such that $a\; R \; b$, namely, $a/b = 2^{m}$ for some integer $m$. Then, $b/a = 1/2^{m} = 2^{-m}$. Since $-m\in \Z$, it follows that $b\; R \; a$.\\
    			Last, we prove that it is transitive. Consider some $a,b,c \in \Q^{+}$ such that $a \; R \; b$ and $b \; R \; c$, which implies that $a/b = 2^{m}$ and $b/c = 2^{n}$ for $m,n\in \Z$. Note that 
    			\begin{align*}
    				\frac{a}{c} &= \frac{a}{b}\cdot \frac{b}{c}\\
    				 &= 2^{m} \cdot 2^{n}\\
    				&= 2^{m+n}.
    			\end{align*}
    		Since $m+n \in \Z$, it follows that $a\; R \; c$.
    		\end{proof}
    		\item Describe the elements in the equivalence class $[3]$.
    		\begin{solution}{b}
    			Consider some positive rational number $x$ such that $x \; R \; 3$. Then, $x/3 = 2^{k}$ for some integer $k$. Then, $x=3 \cdot 2^{k}$. Thus, $[3] = \{3\cdot 2^{k}:k\in \Z\}$.
    		\end{solution}
    	\end{enumerate}
    \end{problem}

	\begin{problem}{31}
		A relation $R$ on a nonempty set $A$ is defined to be \textbf{circular} if whenever $x \; R \; y$ and $y\; R \; z$, then $z\; R \; x$ for all $x,y,z \in A$. Prove that a relation $R$ on $A$ is an equivalence relation if and only if $R$ is circular and reflexive.
		\begin{proof}
			Firts, assume that $R$ is an equivalence relation on some nonempty set $A$. Hence, $R$ is reflexive, symmetric and transitive. We show that it is circular. Consider some $x,y,z\in A$ such that $x\; R \; y$ and $y\; R \; z$. By the transitive property, $x\; R \; z$. Since $R$ is symmetric, it follows that $z\; R \;x$ and so $R$ is circular.\\
			 
			For the converse, Let $R$ be a \textbf{circular} and reflexive relation on some nonempty set $A$. We show that it is symmetric and transitive. Consider some $x,y \in A$ such that $x \; R \; y$. Since $R$ is reflexive, it follows that $y \; R \; y$, and so $y\; R \; x$ due to the circular property of $R$. Thus, $R$ is symmetric.\\
			Now, consider some $x,y,z\in A$ such that $x\; R \;y$ and $y\; R \;z$. By the \textbf{circular property} of $R$, $z \; R \;x$. Because $R$ is symmetric, it follows that $x\; R \; z$ and so $R$ is transitive. Hence, $R$ is an equivalence relation on $A$.
		\end{proof}
	\end{problem}

	\begin{problem}{32}
		A relation $R$ is defined on the set $A=\{a+b\sqrt{2}:a,b\in \Q, a+b\sqrt{2}\neq 0\}$ by $x\; R \; y$ if $x/y \in \Q$. Show that $R$ is an equivalence relation and determine the distinct equivalence classes.
		\begin{solution}{32}
			We first show that $R$ is an equivalence relation. 
			\begin{proof}
				Consider some $x\in A$. Because $x\neq 0$, $x/x = 1 \in \Q$ and so $R$ is reflexive. \\
				Let $x,y\in A$ such that $x\; R \;y$. Then, $x/y=c\in \Q$ and so $1/c = y/x \in \Q$. Hence, $y\; R \; x$ and so $R$ is symmetric.\\
				Last, consider some $x,y,z\in A$ such that $x\; R \;y$ and $y\; R \;z$. Then, $x/y = a \in \Q$ and $y/z = b \in \Q$. Note that
				\begin{equation*}
					\frac{x}{y} \cdot \frac{y}{z} = \frac{x}{z} = ab \in \Q.
				\end{equation*}
			Thus, $x\; R \; z$ and so $R$ is transitive.
			\end{proof}
			Since $R$ is an equivalence relation, we can proceed to determine the equivalence class for each $y\in A$. Consider some $y\in A$. Then, $y=a+b\sqrt{2}\neq 0$ for some $a,b\in \Q$. For any element $x\in A$, $x\; R \; y$ if $x/y = c$ for some $c\in \Q$. Hence, $x = cy$. Since $y,x\neq 0$, it must be true that $c \neq 0$. Therefore,
			\begin{equation*}
				[y] = \left\{cy:c\in \Q/\{0\}\right\}
			\end{equation*}
		Note that when $y$ is rational, namely, when $a \neq 0$ and $b=0$, $[y] =\Q/\left\{0\right\}$. 
		\end{solution}	
	\end{problem}

	\begin{problem}{34}
		Let $H$ be a nonempty subset of $\Z$. Suppose that the relation $R$ defined on $\Z$ by $a\; R \;b$ if $a-b \in H$ is an equivalence relation. Recall that 
		\begin{align*}
			R&=\{(a,b)\in \Z\times \Z : a\; R \;b\}\\
			&=\{(a,b)\in \Z\times \Z : a-b \in H\}.
		\end{align*}
		So, whenever it is said \textit{a relation defined by }$a\; R \;b$ \textit{if} $a-b\in H$, it refers to a biconditional, namely $a\; R \; b \iff a-b\in H$.
		
		Verify the following
		\begin{enumerate}[label=(\alph*)]
			\item $0\in H$
			\begin{proof}
				Since $R$ is an equivalence relation, it follows that it is reflexive. Thus, $x\; R \; x$ for every $x\in \Z$, which implies that $x-x=0\in H$.
			\end{proof}
			\item If $a\in H$, then $-a\in H$.
			\begin{proof}
			If $a\in H$, then $a-0=a\in H$. Thus, $a\; R \; 0$. We know that $R$ is symmetric. Therefore, $0\; R \; a$ and so $0-a = -a \in H$.
			\end{proof}
			\item If $a,b\in H$, then $a+b\in H$.
			\begin{proof}
				Since $a,b\in H$, it follows that $a\; R \; 0$ and $b\; R \;0$. By implication (b), $-b \in H$ and so $-b\; R \;0$. By the symmetry of $R$, $0\; R \; -b$. Since (1) $a\; R \; 0$ and $0\; R \; -b$, (2) $R$ is transitive, it follows that $a\; R \; -b$, which implies that $a-(-b) = a+b \in H$. 
			\end{proof}
		\end{enumerate}
	\end{problem}

	\begin{problem}{35}
		Prove or disprove: There exist equivalence relations $R_{1}$ and $R_{2}$ on the set $S=\{a,b,c\}$ such that $R_{1} \nsubseteq R_{2}$, $R_{1} \nsupseteq R_{2}$ and $R_{1}\cup R_{2} = S \times S$.
		\begin{solution}{35}
			This is false. Let $R_{1}$ and $R_{2}$ be equivalence relations on $S$ such that $R_{1} \not\subseteq R_{2}$, $R_{1} \not\supseteq R_{2}$ and $R_{1} \cup R_{2} = S\times S$. Thus, there exist $(x,y), (m,n) \in S$ such that $(x,y)\in R_{1}-R_{2}$ and $(m,n)\in R_{2}-R_{1}$. Since they are reflexive, $\{(a,a),(b,b),(c,c)\}\subseteq R_{1}\cap R_{2}$ and so we may further assume that $x\neq y$ and $m\neq n$. Also, since $S$ only has three elements, it must be true that one of $x,y$ is equal to at least one of $m,n$. Without loss of generality, let $y=m$. Due to the symmetric property, $(x,m),(m,x)\in R_{1}-R_{2}$ and $(m,n),(n,m)\in R_{2}-R_{1}$. Since $R_{1} \cup R_{2} = S\times S$, it must be true that $(x,n)$ belongs to at least one of the two equivalence relations. Let $(x,n)\in  R_{1}$. However, since $R_{1}$ is transitive and $(m,x),(x,n)\in R_{1}$, it follows that $(m,n)\in R_{1}$ which is not true. A similar case happens if $(x,n) \in R_{2}$. 
		\end{solution}
	\end{problem}
\end{document}